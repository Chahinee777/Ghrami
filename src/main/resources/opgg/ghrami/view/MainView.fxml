<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="opgg.ghrami.view.MainViewController" stylesheets="@../css/style.css">
    
    <!-- Header -->
    <top>
        <VBox styleClass="header">
            <Label text="Ghrami - Gestion des Utilisateurs" styleClass="app-title">
                <font>
                    <Font name="System Bold" size="24.0" />
                </font>
            </Label>
            <Label text="Plateforme Tunisienne de DÃ©veloppement Personnel" styleClass="app-subtitle">
                <font>
                    <Font size="14.0" />
                </font>
            </Label>
            <padding>
                <Insets top="20.0" right="20.0" bottom="20.0" left="20.0" />
            </padding>
        </VBox>
    </top>

    <!-- Main Content -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="main-tabs">
            
            <!-- Users Tab -->
            <Tab text="ðŸ‘¤ Utilisateurs">
                <HBox spacing="10">
                    <padding>
                        <Insets top="15.0" right="15.0" bottom="15.0" left="15.0" />
                    </padding>
                    
                    <!-- User Table -->
                    <VBox HBox.hgrow="ALWAYS" spacing="10">
                        <Label text="Liste des Utilisateurs" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        <TableView fx:id="userTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="userIdCol" text="ID" prefWidth="50.0" />
                                <TableColumn fx:id="usernameCol" text="Nom d'utilisateur" prefWidth="150.0" />
                                <TableColumn fx:id="emailCol" text="Email" prefWidth="180.0" />
                                <TableColumn fx:id="locationCol" text="Localisation" prefWidth="150.0" />
                                <TableColumn fx:id="onlineCol" text="En ligne" prefWidth="80.0" />
                            </columns>
                        </TableView>
                    </VBox>
                    
                    <!-- User Form -->
                    <VBox spacing="10" prefWidth="350">
                        <Label text="Formulaire Utilisateur" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        
                        <Label text="Nom d'utilisateur *" />
                        <TextField fx:id="usernameField" promptText="Entrez le nom d'utilisateur" />
                        
                        <Label text="Email *" />
                        <TextField fx:id="emailField" promptText="utilisateur@ghrami.tn" />
                        
                        <Label text="Mot de passe *" />
                        <PasswordField fx:id="passwordField" promptText="Entrez le mot de passe" />
                        
                        <Label text="Localisation" />
                        <TextField fx:id="locationField" promptText="Ville, Tunisie" />
                        
                        <Label text="Photo de profil (URL)" />
                        <TextField fx:id="profilePicField" promptText="https://..." />
                        
                        <Label text="Bio" />
                        <TextArea fx:id="bioArea" promptText="Parlez-nous de vous..." prefRowCount="3" />
                        
                        <CheckBox fx:id="onlineCheckBox" text="En ligne" />
                        
                        <HBox spacing="10">
                            <Button text="Ajouter" onAction="#handleAddUser" styleClass="btn-primary" HBox.hgrow="ALWAYS" />
                            <Button text="Modifier" onAction="#handleUpdateUser" styleClass="btn-warning" HBox.hgrow="ALWAYS" />
                        </HBox>
                        <HBox spacing="10">
                            <Button text="Supprimer" onAction="#handleDeleteUser" styleClass="btn-danger" HBox.hgrow="ALWAYS" />
                            <Button text="Effacer" onAction="#handleClearUser" styleClass="btn-secondary" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>
            </Tab>
            
            <!-- Friendships Tab -->
            <Tab text="ðŸ¤ Relations">
                <HBox spacing="10">
                    <padding>
                        <Insets top="15.0" right="15.0" bottom="15.0" left="15.0" />
                    </padding>
                    
                    <!-- Friendship Table -->
                    <VBox HBox.hgrow="ALWAYS" spacing="10">
                        <Label text="Liste des Relations" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        <TableView fx:id="friendshipTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="friendshipIdCol" text="ID" prefWidth="50.0" />
                                <TableColumn fx:id="user1IdCol" text="Utilisateur 1" prefWidth="120.0" />
                                <TableColumn fx:id="user2IdCol" text="Utilisateur 2" prefWidth="120.0" />
                                <TableColumn fx:id="statusCol" text="Statut" prefWidth="150.0" />
                            </columns>
                        </TableView>
                    </VBox>
                    
                    <!-- Friendship Form -->
                    <VBox spacing="15" prefWidth="350">
                        <Label text="Formulaire Relation" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        
                        <Label text="ID Utilisateur 1 *" />
                        <TextField fx:id="friendUser1Field" promptText="ID du premier utilisateur" />
                        
                        <Label text="ID Utilisateur 2 *" />
                        <TextField fx:id="friendUser2Field" promptText="ID du second utilisateur" />
                        
                        <Label text="Statut *" />
                        <ComboBox fx:id="statusComboBox" prefWidth="Infinity" />
                        
                        <HBox spacing="10">
                            <Button text="Ajouter" onAction="#handleAddFriendship" styleClass="btn-primary" HBox.hgrow="ALWAYS" />
                            <Button text="Modifier" onAction="#handleUpdateFriendship" styleClass="btn-warning" HBox.hgrow="ALWAYS" />
                        </HBox>
                        <HBox spacing="10">
                            <Button text="Supprimer" onAction="#handleDeleteFriendship" styleClass="btn-danger" HBox.hgrow="ALWAYS" />
                            <Button text="Effacer" onAction="#handleClearFriendship" styleClass="btn-secondary" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>
            </Tab>
            
            <!-- Badges Tab -->
            <Tab text="ðŸ† Badges">
                <HBox spacing="10">
                    <padding>
                        <Insets top="15.0" right="15.0" bottom="15.0" left="15.0" />
                    </padding>
                    
                    <!-- Badge Table -->
                    <VBox HBox.hgrow="ALWAYS" spacing="10">
                        <Label text="Liste des Badges" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        <TableView fx:id="badgeTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="badgeIdCol" text="ID" prefWidth="50.0" />
                                <TableColumn fx:id="badgeUserIdCol" text="ID Utilisateur" prefWidth="120.0" />
                                <TableColumn fx:id="badgeNameCol" text="Nom du Badge" prefWidth="200.0" />
                                <TableColumn fx:id="descriptionCol" text="Description" prefWidth="300.0" />
                            </columns>
                        </TableView>
                    </VBox>
                    
                    <!-- Badge Form -->
                    <VBox spacing="15" prefWidth="350">
                        <Label text="Formulaire Badge" styleClass="section-title">
                            <font>
                                <Font name="System Bold" size="16.0" />
                            </font>
                        </Label>
                        
                        <Label text="ID Utilisateur *" />
                        <TextField fx:id="badgeUserIdField" promptText="ID de l'utilisateur" />
                        
                        <Label text="Nom du Badge *" />
                        <TextField fx:id="badgeNameField" promptText="Ex: Pionnier Ghrami" />
                        
                        <Label text="Description" />
                        <TextArea fx:id="badgeDescArea" promptText="Description du badge..." prefRowCount="5" />
                        
                        <HBox spacing="10">
                            <Button text="Ajouter" onAction="#handleAddBadge" styleClass="btn-primary" HBox.hgrow="ALWAYS" />
                            <Button text="Modifier" onAction="#handleUpdateBadge" styleClass="btn-warning" HBox.hgrow="ALWAYS" />
                        </HBox>
                        <HBox spacing="10">
                            <Button text="Supprimer" onAction="#handleDeleteBadge" styleClass="btn-danger" HBox.hgrow="ALWAYS" />
                            <Button text="Effacer" onAction="#handleClearBadge" styleClass="btn-secondary" HBox.hgrow="ALWAYS" />
                        </HBox>
                    </VBox>
                </HBox>
            </Tab>
        </TabPane>
    </center>
    
    <!-- Footer -->
    <bottom>
        <HBox styleClass="footer" alignment="CENTER">
            <padding>
                <Insets top="10.0" right="10.0" bottom="10.0" left="10.0" />
            </padding>
            <Label text="Â© 2026 Ghrami - Plateforme Tunisienne de DÃ©veloppement Personnel" />
        </HBox>
    </bottom>
</BorderPane>
